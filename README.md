# JSON Server

This library allows you to create multiple API servers with minimum amount of code or setup, using a JSON configuration.

The generated API can handle simple CRUD of entities to authentication, and much more. Check the documentation bellow.

To understand the endpoints generated by the API, check [this section](/docs/ROUTES.md).

[CHECK COMPLETE EXAMPLE](/docs/COMPLETE-EXAMPLE.md)

## Basic Setup

```js
import Server from "@discovery-solutions/json-server";

const server = new Server({
  name: "my-server",
  config: {
    port: 3500,
    type: "rest",
    format: "json",
  },
  database: {
    type: "custom",
    key: "my-db-1",
    name: "my-custom-db"
  },
  entities: [{
    name: "user",
    alias: "User",
    fields: {
      name: {
        type: "string",
        required: true
      },
      email: {
        type: "string",
        required: true
      },
      password: {
        type: "string",
        required: true
      },
      phone: "string",
      birthdate: "date",
      avatar: "image"
    }
  }]
});

server.run();
```

----------------------

# Parameters

| Parameter Key  | Description             | Required | Default Value |
| :------------- | :---------------------- | :------- | :------------ |
| [name](#name)  | The server project name | true     |  |
| [config](#config) | Setup of the servers | true     |  |
| [database](#database) | Database setup   | false    | native |
| [entities](#entities) | Entities for CRUD features | true  |  |

### name

The simplest of all the parameters, just an identifyer for your project. This should be an string, like the example below:

```js
const server = new Server({
  name: "my-server"
});
```

### config

This could a simple object for one server, or an array of objects for multiple servers configuration.

| Key            | Description    | Type or Options | Required |
| :------------- | :------------- | :-------------- | :------- |
| ```port``` | number of the port the server should run | ```number``` | ```true``` |
| ```database``` | the database key the server should use | ```string``` | ```true``` |
| ```format``` | format of the responses | ```json```, ```csv``` |  |
| ```type``` | type of the server | ```rest```, ```socket``` |  |
| ```request``` | settings for requests | ```object``` |  |

#### **Complete example:**

```js
const server = new Server({
  // ...
  config: {
    port: 3500,
    type: "rest",
    format: "json",
    database: "my-db-1",
    request: {
      limit: 10,
    },
  }
});
```

#### **Multiple servers example**
```js
const server = new Server({
  // ...
  config: [{
    port: 3501,
    type: "rest",
    database: "my-db-1",
    format: "json",
  }, {
    port: 3501,
    type: "socket",
    database: "my-db-2",
    format: "csv",
  }]
});
```

### Database

```...```

### Entities
```...```

### Custom Routes
You can easily add custom routes using the server object returned by the JSONServer Class, in a ExpressJS like manner.

```
const server = new Server({ ... });

server.routes.get("/my/endpoint", (req, res) => {
  res.json({ message: "It's working "})
})
```

# Roadmap

* [x] CRUD routes
  * [x] Insert
  * [x] List/Get
  * [x] Update
  * [x] Delete
  * [x] Bulk insert
* [x] Authentication
  * [x] JWT
  * [x] Simple Token
  * [x] Authentication routes
  * [x] Authorization handler
* [x] Create tests for features
* [x] Interceptor to add custom requests
* [x] Add logger for request and API transactions
* [x] Full search for all entities
* [ ] Finish Documentation
* [ ] Databases
  * [x] In-Memory DB
  * [ ] PostgreSQL
  * [x] MongoDB
  * [ ] MySQL

Future features:
* [ ] Blog setup (?)
* [ ] Chat setup (?)
* [ ] Ecommerce Setup (?)
* [ ] Bulk actions
  * [x] Bulk insert
  * [ ] Bulk update
  * [ ] Bulk delete
